<!DOCTYPE html>
<html lang="en-us"
  dir="ltr">

<head>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width">








    






<link rel="icon" type="image/ico" href="/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="192x192" href="/android-chrome-192x192.png">
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">

<meta name="description" content=""/>



<title>
    
    TTS Study Assistant: A Chrome Extension | Prateek Sharma
    
</title>

<link rel="canonical" href="/projects/tts-study-assistant/"/>

<meta property="og:url" content="/projects/tts-study-assistant/">
  <meta property="og:site_name" content="Prateek Sharma">
  <meta property="og:title" content="TTS Study Assistant: A Chrome Extension">
  <meta property="og:description" content="Introduction # I recently built a comprehensive TTS (Text-to-Speech) Study Assistantthat enables a user to save notes, play audio for the saved notes and summarize them using AI. It combines a Chrome extension with a Go backend and React based admin panel.
Project Overview # The TTS Study Assistant is a study tool that helps users:
Capture and organize notes from any webpage Listen to text selections using Chromeâ€™s TTS API Summarize notes using AI for quick review Manage notes using a React-based admin panel Architecture # Tech Stack # Backend (Golang)">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="projects">
    <meta property="article:published_time" content="2024-01-15T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-01-15T00:00:00+00:00">
    <meta property="article:tag" content="Chrome-Extension">
    <meta property="article:tag" content="Go">
    <meta property="article:tag" content="React">
    <meta property="article:tag" content="Typescript">
    <meta property="article:tag" content="Ai">
    <meta property="article:tag" content="Tts">












<link rel="stylesheet" href="/assets/combined.min.92c3bf7119b98cfdc79e93f36a451eb901d8bbbfed7d75814e6436cf6c9085dc.css" media="all">















    




</head>







<body class="auto">

  <div class="content">
    <header>
      

<div class="header">

    

    <h1 class="header-title">
        <a href="/">Prateek Sharma</a>
    </h1>

    <div class="header-menu">
        

        
        

        <p
            class="small ">
            <a href="/" >
                /home
            </a>
        </p>
        

        <p
            class="small ">
            <a href="/experiences" >
                /experiences
            </a>
        </p>
        

        <p
            class="small ">
            <a href="/projects" >
                /projects
            </a>
        </p>
        

        <p
            class="small ">
            <a href="/posts" >
                /posts
            </a>
        </p>
        

        <p
            class="small ">
            <a href="/about" >
                /about
            </a>
        </p>
        

        <p
            class="small ">
            <a href="https://drive.google.com/file/d/11VADCUZrHJzU2U8J5Y5lJmXiOUVLUhDG/view?usp=sharing" >
                /resume
            </a>
        </p>
        
        
    </div>

    

</div>

    </header>

    <main class="main">
      




<div class="breadcrumbs"><a href="/">~</a><span class="breadcrumbs-separator">/</span><a href="/projects/">Projects</a><span class="breadcrumbs-separator">/</span>
        <a href="/projects/tts-study-assistant/">TTS Study Assistant: A Chrome Extension</a></div>


<div >
  <article>
    <header class="single-intro-container">
        
        <h1 class="single-title">TTS Study Assistant: A Chrome Extension</h1>
        
        <div class="single-subsummary">
          
          <div>
            
            <p class="single-date">
              <time datetime="2024-01-15T00:00:00&#43;00:00">January 15, 2024</time>
            </p>
          </div>
        </div>
        
    </header>
    
    <div class="single-content">
      <h2 class="heading" id="introduction">
  Introduction
  <a class="anchor" href="#introduction">#</a>
</h2>
<p>I recently built a comprehensive TTS (Text-to-Speech) Study Assistantthat enables a user to save notes, play audio for the saved notes and summarize them using AI. It combines a Chrome extension with a Go backend and React based admin panel.</p>
<h2 class="heading" id="project-overview">
  Project Overview
  <a class="anchor" href="#project-overview">#</a>
</h2>
<p>The TTS Study Assistant is a study tool that helps users:</p>
<ul>
<li><strong>Capture and organize notes</strong> from any webpage</li>
<li><strong>Listen to text selections</strong> using Chrome&rsquo;s TTS API</li>
<li><strong>Summarize notes</strong> using AI for quick review</li>
<li><strong>Manage notes</strong> using a React-based admin panel</li>
</ul>
<h2 class="heading" id="architecture">
  Architecture
  <a class="anchor" href="#architecture">#</a>
</h2>
<h3 class="heading" id="tech-stack">
  Tech Stack
  <a class="anchor" href="#tech-stack">#</a>
</h3>
<p><strong>Backend (Golang)</strong></p>
<ul>
<li><strong>Framework</strong>: Fiber (high-performance HTTP framework)</li>
<li><strong>Database</strong>: PostgreSQL with GORM ORM</li>
<li><strong>Authentication</strong>: JWT with source-based token expiry</li>
<li><strong>AI Integration</strong>: OpenAI GPT-3.5-turbo for text summarization</li>
<li><strong>Deployment</strong>: Docker containerization on Railway</li>
</ul>
<p><strong>Frontend (React + TypeScript)</strong></p>
<ul>
<li><strong>Framework</strong>: React 18 with TypeScript</li>
<li><strong>Build Tool</strong>: Vite for fast development and building</li>
<li><strong>State Management</strong>: React Context + React Query</li>
<li><strong>Deployment</strong>: Vercel for static hosting</li>
</ul>
<p><strong>Chrome Extension</strong></p>
<ul>
<li><strong>Manifest</strong>: Manifest V3 for modern extension APIs</li>
<li><strong>Storage</strong>: Chrome Storage API for local state</li>
<li><strong>TTS</strong>: Chrome TTS API for text-to-speech</li>
<li><strong>Content Scripts</strong>: For webpage interaction</li>
</ul>
<h2 class="heading" id="key-features">
  Key Features
  <a class="anchor" href="#key-features">#</a>
</h2>
<h3 class="heading" id="1-text-to-speech-functionality">
  1. Text-to-Speech Functionality
  <a class="anchor" href="#1-text-to-speech-functionality">#</a>
</h3>
<p>The core TTS feature allows users to:</p>
<ul>
<li><strong>Select any text</strong> on a webpage and have it read aloud</li>
<li><strong>Control playback</strong> with play, pause, resume, and stop controls</li>
<li><strong>Queue management</strong> for multiple text selections</li>
</ul>
<p><strong>Technical Implementation:</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#888;font-style:italic">// Content script handles text selection and TTS requests
</span></span></span><span style="display:flex;"><span><span style="color:#888;font-style:italic"></span>chrome.runtime.sendMessage({
</span></span><span style="display:flex;"><span>  action: <span style="color:#666;font-style:italic">&#39;speak&#39;</span>,
</span></span><span style="display:flex;"><span>  text: selectedText,
</span></span><span style="display:flex;"><span>  tabId: tab.id
</span></span><span style="display:flex;"><span>});
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#888;font-style:italic">// Background script manages Chrome TTS API
</span></span></span><span style="display:flex;"><span><span style="color:#888;font-style:italic"></span>chrome.tts.speak(text, {
</span></span><span style="display:flex;"><span>  rate: 1.0,
</span></span><span style="display:flex;"><span>  pitch: 1.0,
</span></span><span style="display:flex;"><span>  onEvent: <span style="font-weight:bold;font-style:italic;text-decoration:underline">function</span>(event) {
</span></span><span style="display:flex;"><span>    <span style="color:#888;font-style:italic">// Handle TTS events
</span></span></span><span style="display:flex;"><span><span style="color:#888;font-style:italic"></span>  }
</span></span><span style="display:flex;"><span>});
</span></span></code></pre></div><h3 class="heading" id="2-note-management-system">
  2. Note Management System
  <a class="anchor" href="#2-note-management-system">#</a>
</h3>
<p>Users can save and organize study notes with:</p>
<ul>
<li><strong>Automatic domain detection</strong> from source URLs</li>
<li><strong>Rich metadata</strong> storage for additional context</li>
<li><strong>Pagination and filtering</strong> for large note collections</li>
</ul>
<p><strong>Database Schema:</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="font-weight:bold;text-decoration:underline">CREATE</span> <span style="font-weight:bold;text-decoration:underline">TABLE</span> notes (
</span></span><span style="display:flex;"><span>  id UUID <span style="font-weight:bold;text-decoration:underline">PRIMARY</span> <span style="font-weight:bold;text-decoration:underline">KEY</span> <span style="font-weight:bold;text-decoration:underline">DEFAULT</span> uuid_generate_v4(),
</span></span><span style="display:flex;"><span>  user_id UUID <span style="font-weight:bold;text-decoration:underline">NOT</span> <span style="font-weight:bold;text-decoration:underline">NULL</span>,
</span></span><span style="display:flex;"><span>  content <span style="font-weight:bold;font-style:italic">TEXT</span> <span style="font-weight:bold;text-decoration:underline">NOT</span> <span style="font-weight:bold;text-decoration:underline">NULL</span>,
</span></span><span style="display:flex;"><span>  source_url <span style="font-weight:bold;font-style:italic">TEXT</span>,
</span></span><span style="display:flex;"><span>  source_title <span style="font-weight:bold;font-style:italic">TEXT</span>,
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold;text-decoration:underline">domain</span> <span style="font-weight:bold;font-style:italic">TEXT</span>,
</span></span><span style="display:flex;"><span>  summary <span style="font-weight:bold;font-style:italic">TEXT</span>,
</span></span><span style="display:flex;"><span>  metadata JSONB,
</span></span><span style="display:flex;"><span>  created_at <span style="font-weight:bold;text-decoration:underline">TIMESTAMP</span>,
</span></span><span style="display:flex;"><span>  updated_at <span style="font-weight:bold;text-decoration:underline">TIMESTAMP</span>
</span></span><span style="display:flex;"><span>);
</span></span></code></pre></div><h3 class="heading" id="3-ai-powered-summarization">
  3. AI-Powered Summarization
  <a class="anchor" href="#3-ai-powered-summarization">#</a>
</h3>
<p>The system integrates OpenAI&rsquo;s GPT-3.5-turbo for intelligent text summarization:</p>
<p><strong>Go Implementation:</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="font-weight:bold;font-style:italic;text-decoration:underline">func</span> (s *SummarizerService) <span style="color:#666;font-weight:bold;font-style:italic">Summarize</span>(text <span style="font-weight:bold;text-decoration:underline">string</span>) (<span style="font-weight:bold;text-decoration:underline">string</span>, <span style="font-weight:bold;text-decoration:underline">error</span>) {
</span></span><span style="display:flex;"><span>    payload := <span style="font-weight:bold;font-style:italic;text-decoration:underline">map</span>[<span style="font-weight:bold;text-decoration:underline">string</span>]<span style="font-weight:bold;font-style:italic;text-decoration:underline">interface</span>{}{
</span></span><span style="display:flex;"><span>        <span style="color:#666;font-style:italic">&#34;model&#34;</span>: <span style="color:#666;font-style:italic">&#34;gpt-3.5-turbo&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#666;font-style:italic">&#34;messages&#34;</span>: []<span style="font-weight:bold;font-style:italic;text-decoration:underline">map</span>[<span style="font-weight:bold;text-decoration:underline">string</span>]<span style="font-weight:bold;text-decoration:underline">string</span>{
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                <span style="color:#666;font-style:italic">&#34;role&#34;</span>:    <span style="color:#666;font-style:italic">&#34;system&#34;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#666;font-style:italic">&#34;content&#34;</span>: <span style="color:#666;font-style:italic">&#34;You are a helpful assistant that creates concise summaries. Summarize the following text in 2-3 sentences, capturing the key points.&#34;</span>,
</span></span><span style="display:flex;"><span>            },
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                <span style="color:#666;font-style:italic">&#34;role&#34;</span>:    <span style="color:#666;font-style:italic">&#34;user&#34;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#666;font-style:italic">&#34;content&#34;</span>: text,
</span></span><span style="display:flex;"><span>            },
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>        <span style="color:#666;font-style:italic">&#34;temperature&#34;</span>: 0.7,
</span></span><span style="display:flex;"><span>        <span style="color:#666;font-style:italic">&#34;max_tokens&#34;</span>:  150,
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#888;font-style:italic">// Make API call to OpenAI</span>
</span></span><span style="display:flex;"><span>    <span style="color:#888;font-style:italic">// Parse response and return summary</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 class="heading" id="4-authentication--security">
  4. Authentication &amp; Security
  <a class="anchor" href="#4-authentication--security">#</a>
</h3>
<p><strong>Multi-Source Authentication:</strong></p>
<ul>
<li><strong>Web sessions</strong>: 15-minute access tokens, 30-day refresh tokens</li>
<li><strong>Extension sessions</strong>: 1-hour access tokens, 90-day refresh tokens</li>
<li><strong>Token rotation</strong> on refresh for enhanced security</li>
<li><strong>Source tracking</strong> for audit and security purposes</li>
</ul>
<p><strong>JWT Implementation:</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="font-weight:bold;font-style:italic;text-decoration:underline">func</span> (s *AuthService) <span style="color:#666;font-weight:bold;font-style:italic">generateAccessTokenWithSource</span>(userID, email, source <span style="font-weight:bold;text-decoration:underline">string</span>) (<span style="font-weight:bold;text-decoration:underline">string</span>, <span style="font-weight:bold;text-decoration:underline">error</span>) {
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold;font-style:italic;text-decoration:underline">var</span> exp time.Duration
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold;text-decoration:underline">switch</span> source {
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold;text-decoration:underline">case</span> <span style="color:#666;font-style:italic">&#34;extension&#34;</span>:
</span></span><span style="display:flex;"><span>        exp = time.Hour * 1
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold;text-decoration:underline">default</span>:
</span></span><span style="display:flex;"><span>        exp = time.Minute * 15
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    claims := jwt.MapClaims{
</span></span><span style="display:flex;"><span>        <span style="color:#666;font-style:italic">&#34;user_id&#34;</span>: userID,
</span></span><span style="display:flex;"><span>        <span style="color:#666;font-style:italic">&#34;email&#34;</span>:   email,
</span></span><span style="display:flex;"><span>        <span style="color:#666;font-style:italic">&#34;exp&#34;</span>:     time.<span style="color:#666;font-weight:bold;font-style:italic">Now</span>().<span style="color:#666;font-weight:bold;font-style:italic">Add</span>(exp).<span style="color:#666;font-weight:bold;font-style:italic">Unix</span>(),
</span></span><span style="display:flex;"><span>        <span style="color:#666;font-style:italic">&#34;iat&#34;</span>:     time.<span style="color:#666;font-weight:bold;font-style:italic">Now</span>().<span style="color:#666;font-weight:bold;font-style:italic">Unix</span>(),
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    token := jwt.<span style="color:#666;font-weight:bold;font-style:italic">NewWithClaims</span>(jwt.SigningMethodHS256, claims)
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold;text-decoration:underline">return</span> token.<span style="color:#666;font-weight:bold;font-style:italic">SignedString</span>([]<span style="font-weight:bold;font-style:italic">byte</span>(s.cfg.JWTSecret))
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 class="heading" id="5-chrome-extension-architecture">
  5. Chrome Extension Architecture
  <a class="anchor" href="#5-chrome-extension-architecture">#</a>
</h3>
<p><strong>Manifest V3 Structure:</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  &#34;manifest_version&#34;: 3,
</span></span><span style="display:flex;"><span>  &#34;name&#34;: <span style="color:#666;font-style:italic">&#34;TTS Study Assistant&#34;</span>,
</span></span><span style="display:flex;"><span>  &#34;version&#34;: <span style="color:#666;font-style:italic">&#34;1.0.0&#34;</span>,
</span></span><span style="display:flex;"><span>  &#34;permissions&#34;: [
</span></span><span style="display:flex;"><span>    <span style="color:#666;font-style:italic">&#34;storage&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#666;font-style:italic">&#34;tts&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#666;font-style:italic">&#34;activeTab&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#666;font-style:italic">&#34;contextMenus&#34;</span>
</span></span><span style="display:flex;"><span>  ],
</span></span><span style="display:flex;"><span>  &#34;background&#34;: {
</span></span><span style="display:flex;"><span>    &#34;service_worker&#34;: <span style="color:#666;font-style:italic">&#34;background.js&#34;</span>
</span></span><span style="display:flex;"><span>  },
</span></span><span style="display:flex;"><span>  &#34;content_scripts&#34;: [{
</span></span><span style="display:flex;"><span>    &#34;matches&#34;: [<span style="color:#666;font-style:italic">&#34;&lt;all_urls&gt;&#34;</span>],
</span></span><span style="display:flex;"><span>    &#34;js&#34;: [<span style="color:#666;font-style:italic">&#34;content.js&#34;</span>],
</span></span><span style="display:flex;"><span>    &#34;css&#34;: [<span style="color:#666;font-style:italic">&#34;content.css&#34;</span>]
</span></span><span style="display:flex;"><span>  }]
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><strong>Key Components:</strong></p>
<ul>
<li><strong>Background Service Worker</strong>: Manages TTS state and API communication</li>
<li><strong>Content Scripts</strong>: Handle text selection and user interaction</li>
<li><strong>Popup Interface</strong>: Provides controls and note management</li>
<li><strong>Storage API</strong>: Persists user preferences and authentication state</li>
</ul>
<h2 class="heading" id="development-challenges--solutions">
  Development Challenges &amp; Solutions
  <a class="anchor" href="#development-challenges--solutions">#</a>
</h2>
<h3 class="heading" id="1-chrome-extension-tts-limitations">
  1. Chrome Extension TTS Limitations
  <a class="anchor" href="#1-chrome-extension-tts-limitations">#</a>
</h3>
<p><strong>Challenge</strong>: Chrome&rsquo;s TTS API doesn&rsquo;t provide detailed playback state information.</p>
<p><strong>Solution</strong>: Implemented a custom state management system:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#888;font-style:italic">// Track TTS state manually
</span></span></span><span style="display:flex;"><span><span style="color:#888;font-style:italic"></span><span style="font-weight:bold;font-style:italic;text-decoration:underline">let</span> currentState = {
</span></span><span style="display:flex;"><span>  isPlaying: <span style="font-weight:bold;text-decoration:underline">false</span>,
</span></span><span style="display:flex;"><span>  isPaused: <span style="font-weight:bold;text-decoration:underline">false</span>,
</span></span><span style="display:flex;"><span>  currentText: <span style="font-weight:bold;text-decoration:underline">null</span>,
</span></span><span style="display:flex;"><span>  queue: []
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#888;font-style:italic">// Update UI based on state
</span></span></span><span style="display:flex;"><span><span style="color:#888;font-style:italic"></span><span style="font-weight:bold;font-style:italic;text-decoration:underline">function</span> updateButtonStates() {
</span></span><span style="display:flex;"><span>  playBtn.disabled = !currentState.queue.length &amp;&amp; !currentState.currentText;
</span></span><span style="display:flex;"><span>  pauseBtn.style.display = currentState.isPlaying ? <span style="color:#666;font-style:italic">&#39;block&#39;</span> : <span style="color:#666;font-style:italic">&#39;none&#39;</span>;
</span></span><span style="display:flex;"><span>  resumeBtn.style.display = currentState.isPaused ? <span style="color:#666;font-style:italic">&#39;block&#39;</span> : <span style="color:#666;font-style:italic">&#39;none&#39;</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 class="heading" id="2-cross-origin-api-communication">
  2. Cross-Origin API Communication
  <a class="anchor" href="#2-cross-origin-api-communication">#</a>
</h3>
<p><strong>Challenge</strong>: Chrome extensions need to communicate with external APIs while handling CORS.</p>
<p><strong>Solution</strong>: Used Chrome&rsquo;s storage API for token management and implemented proper error handling:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="font-weight:bold;text-decoration:underline">class</span> ApiClient {
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold;text-decoration:underline">async</span> _fetchWithAuth(url, options = {}) {
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold;text-decoration:underline">const</span> token = <span style="font-weight:bold;text-decoration:underline">await</span> <span style="font-weight:bold;text-decoration:underline">this</span>.getAccessToken();
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold;text-decoration:underline">const</span> response = <span style="font-weight:bold;text-decoration:underline">await</span> fetch(url, {
</span></span><span style="display:flex;"><span>      ...options,
</span></span><span style="display:flex;"><span>      headers: {
</span></span><span style="display:flex;"><span>        <span style="color:#666;font-style:italic">&#39;Authorization&#39;</span>: <span style="color:#666;font-style:italic">`Bearer </span><span style="color:#666;font-style:italic">${</span>token<span style="color:#666;font-style:italic">}</span><span style="color:#666;font-style:italic">`</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#666;font-style:italic">&#39;Content-Type&#39;</span>: <span style="color:#666;font-style:italic">&#39;application/json&#39;</span>,
</span></span><span style="display:flex;"><span>        ...options.headers
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold;text-decoration:underline">if</span> (response.status === 401) {
</span></span><span style="display:flex;"><span>      <span style="color:#888;font-style:italic">// Handle token refresh
</span></span></span><span style="display:flex;"><span><span style="color:#888;font-style:italic"></span>      <span style="font-weight:bold;text-decoration:underline">await</span> <span style="font-weight:bold;text-decoration:underline">this</span>.refreshToken();
</span></span><span style="display:flex;"><span>      <span style="font-weight:bold;text-decoration:underline">return</span> <span style="font-weight:bold;text-decoration:underline">this</span>._fetchWithAuth(url, options);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold;text-decoration:underline">return</span> response;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 class="heading" id="3-real-time-ui-synchronization">
  3. Real-time UI Synchronization
  <a class="anchor" href="#3-real-time-ui-synchronization">#</a>
</h3>
<p><strong>Challenge</strong>: Keeping popup UI in sync with background TTS state.</p>
<p><strong>Solution</strong>: Implemented message passing between background and popup:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#888;font-style:italic">// Background sends state updates
</span></span></span><span style="display:flex;"><span><span style="color:#888;font-style:italic"></span>chrome.runtime.sendMessage({
</span></span><span style="display:flex;"><span>  action: <span style="color:#666;font-style:italic">&#39;stateUpdate&#39;</span>,
</span></span><span style="display:flex;"><span>  state: ttsState
</span></span><span style="display:flex;"><span>});
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#888;font-style:italic">// Popup listens for updates
</span></span></span><span style="display:flex;"><span><span style="color:#888;font-style:italic"></span>chrome.runtime.onMessage.addListener((message) =&gt; {
</span></span><span style="display:flex;"><span>  <span style="font-weight:bold;text-decoration:underline">if</span> (message.action === <span style="color:#666;font-style:italic">&#39;stateUpdate&#39;</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#888;font-style:italic">// UI Update logic
</span></span></span><span style="display:flex;"><span><span style="color:#888;font-style:italic"></span>  }
</span></span><span style="display:flex;"><span>});
</span></span></code></pre></div><h2 class="heading" id="performance-optimizations">
  Performance Optimizations
  <a class="anchor" href="#performance-optimizations">#</a>
</h2>
<h3 class="heading" id="1-database-indexing">
  1. Database Indexing
  <a class="anchor" href="#1-database-indexing">#</a>
</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#888;font-style:italic">-- Optimize note queries by user and domain
</span></span></span><span style="display:flex;"><span><span style="color:#888;font-style:italic"></span><span style="font-weight:bold;text-decoration:underline">CREATE</span> <span style="font-weight:bold;text-decoration:underline">INDEX</span> idx_uid_did <span style="font-weight:bold;text-decoration:underline">ON</span> notes(user_id, <span style="font-weight:bold;text-decoration:underline">domain</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#888;font-style:italic">-- Index for refresh token lookups
</span></span></span><span style="display:flex;"><span><span style="color:#888;font-style:italic"></span><span style="font-weight:bold;text-decoration:underline">CREATE</span> <span style="font-weight:bold;text-decoration:underline">INDEX</span> idx_refresh_token <span style="font-weight:bold;text-decoration:underline">ON</span> refresh_tokens(token);
</span></span></code></pre></div><h3 class="heading" id="2-frontend-code-splitting">
  2. Frontend Code Splitting
  <a class="anchor" href="#2-frontend-code-splitting">#</a>
</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-typescript" data-lang="typescript"><span style="display:flex;"><span><span style="color:#888;font-style:italic">// Lazy load components for better performance
</span></span></span><span style="display:flex;"><span><span style="color:#888;font-style:italic"></span><span style="font-weight:bold;text-decoration:underline">const</span> Dashboard = lazy(() =&gt; <span style="font-weight:bold;text-decoration:underline">import</span>(<span style="color:#666;font-style:italic">&#39;./pages/Dashboard&#39;</span>));
</span></span><span style="display:flex;"><span><span style="font-weight:bold;text-decoration:underline">const</span> Notes = lazy(() =&gt; <span style="font-weight:bold;text-decoration:underline">import</span>(<span style="color:#666;font-style:italic">&#39;./pages/Notes&#39;</span>));
</span></span><span style="display:flex;"><span><span style="font-weight:bold;text-decoration:underline">const</span> Profile = lazy(() =&gt; <span style="font-weight:bold;text-decoration:underline">import</span>(<span style="color:#666;font-style:italic">&#39;./pages/Profile&#39;</span>));
</span></span></code></pre></div><h2 class="heading" id="deployment-strategy">
  Deployment Strategy
  <a class="anchor" href="#deployment-strategy">#</a>
</h2>
<h3 class="heading" id="backend-deployment">
  Backend Deployment
  <a class="anchor" href="#backend-deployment">#</a>
</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-dockerfile" data-lang="dockerfile"><span style="display:flex;"><span><span style="color:#888;font-style:italic"># Multi-stage Docker build</span><span style="">
</span></span></span><span style="display:flex;"><span><span style=""></span><span style="font-weight:bold;text-decoration:underline">FROM</span><span style="color:#666;font-style:italic"> golang:1.21-alpine AS builder</span><span style="">
</span></span></span><span style="display:flex;"><span><span style=""></span><span style="font-weight:bold;text-decoration:underline">WORKDIR</span><span style="color:#666;font-style:italic"> /app</span><span style="">
</span></span></span><span style="display:flex;"><span><span style=""></span><span style="font-weight:bold;text-decoration:underline">COPY</span> go.mod go.sum ./<span style="">
</span></span></span><span style="display:flex;"><span><span style=""></span><span style="font-weight:bold;text-decoration:underline">RUN</span> go mod download<span style="">
</span></span></span><span style="display:flex;"><span><span style=""></span><span style="font-weight:bold;text-decoration:underline">COPY</span> . .<span style="">
</span></span></span><span style="display:flex;"><span><span style=""></span><span style="font-weight:bold;text-decoration:underline">RUN</span> <span style="color:#666;font-weight:bold;font-style:italic">CGO_ENABLED</span>=0 <span style="color:#666;font-weight:bold;font-style:italic">GOOS</span>=linux go build -o main ./cmd/server<span style="">
</span></span></span><span style="display:flex;"><span><span style="">
</span></span></span><span style="display:flex;"><span><span style=""></span><span style="font-weight:bold;text-decoration:underline">FROM</span><span style="color:#666;font-style:italic"> alpine:latest</span><span style="">
</span></span></span><span style="display:flex;"><span><span style=""></span><span style="font-weight:bold;text-decoration:underline">RUN</span> apk --no-cache add ca-certificates<span style="">
</span></span></span><span style="display:flex;"><span><span style=""></span><span style="font-weight:bold;text-decoration:underline">WORKDIR</span><span style="color:#666;font-style:italic"> /root/</span><span style="">
</span></span></span><span style="display:flex;"><span><span style=""></span><span style="font-weight:bold;text-decoration:underline">COPY</span> --from=builder /app/main .<span style="">
</span></span></span><span style="display:flex;"><span><span style=""></span><span style="font-weight:bold;text-decoration:underline">EXPOSE</span><span style="color:#666;font-style:italic"> 3000</span><span style="">
</span></span></span><span style="display:flex;"><span><span style=""></span><span style="font-weight:bold;text-decoration:underline">CMD</span> [<span style="color:#666;font-style:italic">&#34;./main&#34;</span>]<span style="">
</span></span></span></code></pre></div><h3 class="heading" id="frontend-deployment">
  Frontend Deployment
  <a class="anchor" href="#frontend-deployment">#</a>
</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#888;font-style:italic">// vercel.json for SPA routing
</span></span></span><span style="display:flex;"><span><span style="color:#888;font-style:italic"></span>{
</span></span><span style="display:flex;"><span>    &#34;routes&#34;: [
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            &#34;src&#34;: <span style="color:#666;font-style:italic">&#34;/[^.]+&#34;</span>,
</span></span><span style="display:flex;"><span>            &#34;dest&#34;: <span style="color:#666;font-style:italic">&#34;/&#34;</span>,
</span></span><span style="display:flex;"><span>            &#34;status&#34;: 200
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    ]
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 class="heading" id="security-considerations">
  Security Considerations
  <a class="anchor" href="#security-considerations">#</a>
</h2>
<h3 class="heading" id="1-password-security">
  1. Password Security
  <a class="anchor" href="#1-password-security">#</a>
</h3>
<ul>
<li><strong>Client-side hashing</strong>: Passwords are hashed using SHA-256 before transmission</li>
<li><strong>No plain text storage</strong>: Backend never sees plain text passwords</li>
<li><strong>Secure comparison</strong>: Direct hash comparison for authentication
Example to generate SHA-256 hash in TypeScript:</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>export async function <span style="color:#666;font-weight:bold;font-style:italic">sha256</span>(str: <span style="font-weight:bold;text-decoration:underline">string</span>): Promise&lt;<span style="font-weight:bold;text-decoration:underline">string</span>&gt; {
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold;font-style:italic;text-decoration:underline">const</span> encoder = new <span style="color:#666;font-weight:bold;font-style:italic">TextEncoder</span>();
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold;font-style:italic;text-decoration:underline">const</span> data = encoder.<span style="color:#666;font-weight:bold;font-style:italic">encode</span>(str);
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold;font-style:italic;text-decoration:underline">const</span> hashBuffer = await window.crypto.subtle.<span style="color:#666;font-weight:bold;font-style:italic">digest</span>(<span style="">&#39;</span>SHA-256<span style="">&#39;</span>, data);
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold;text-decoration:underline">return</span> Array.<span style="color:#666;font-weight:bold;font-style:italic">from</span>(new <span style="color:#666;font-weight:bold;font-style:italic">Uint8Array</span>(hashBuffer))
</span></span><span style="display:flex;"><span>        .<span style="font-weight:bold;font-style:italic;text-decoration:underline">map</span>(b =&gt; b.<span style="color:#666;font-weight:bold;font-style:italic">toString</span>(16).<span style="color:#666;font-weight:bold;font-style:italic">padStart</span>(2, <span style="color:#666;font-style:italic">&#39;0&#39;</span>))
</span></span><span style="display:flex;"><span>        .<span style="color:#666;font-weight:bold;font-style:italic">join</span>(<span style="">&#39;&#39;</span>);
</span></span><span style="display:flex;"><span>} 
</span></span></code></pre></div><h3 class="heading" id="2-api-security">
  2. API Security
  <a class="anchor" href="#2-api-security">#</a>
</h3>
<ul>
<li><strong>JWT tokens</strong>: Secure, time-limited access tokens</li>
<li><strong>CORS configuration</strong>: Properly configured for cross-origin requests</li>
<li><strong>Input validation</strong>: Comprehensive request validation</li>
<li><strong>SQL injection prevention</strong>: GORM ORM with parameterized queries</li>
</ul>
<h3 class="heading" id="3-extension-security">
  3. Extension Security
  <a class="anchor" href="#3-extension-security">#</a>
</h3>
<ul>
<li><strong>Minimal permissions</strong>: Only requested necessary Chrome APIs</li>
<li><strong>Content script isolation</strong>: Proper sandboxing of web page interaction</li>
<li><strong>Secure storage</strong>: Chrome Storage API for sensitive data</li>
</ul>
<h2 class="heading" id="future-enhancements">
  Future Enhancements
  <a class="anchor" href="#future-enhancements">#</a>
</h2>
<h3 class="heading" id="planned-features">
  Planned Features
  <a class="anchor" href="#planned-features">#</a>
</h3>
<ol>
<li><strong>Offline support</strong> with service workers</li>
<li><strong>Voice customization</strong> for TTS (speed, pitch, voice selection)</li>
<li><strong>Study analytics</strong> and progress tracking</li>
<li><strong>Collaborative notes</strong> with sharing capabilities</li>
</ol>
<h3 class="heading" id="technical-improvements">
  Technical Improvements
  <a class="anchor" href="#technical-improvements">#</a>
</h3>
<ol>
<li><strong>WebSocket support</strong> for real-time updates</li>
<li><strong>Advanced caching</strong> with Redis</li>
</ol>
<h2 class="heading" id="lessons-learned">
  Lessons Learned
  <a class="anchor" href="#lessons-learned">#</a>
</h2>
<h3 class="heading" id="1-chrome-extension-development">
  1. Chrome Extension Development
  <a class="anchor" href="#1-chrome-extension-development">#</a>
</h3>
<ul>
<li><strong>Manifest V3</strong> introduces new security models and limitations</li>
<li><strong>Service workers</strong> replace background pages but have different lifecycle</li>
<li><strong>Content script isolation</strong> requires careful message passing design</li>
</ul>
<h3 class="heading" id="2-go-backend-development">
  2. Go Backend Development
  <a class="anchor" href="#2-go-backend-development">#</a>
</h3>
<ul>
<li><strong>Fiber framework</strong> provides excellent performance for HTTP APIs</li>
<li><strong>GORM</strong> simplifies database operations but requires careful query optimization</li>
<li><strong>JWT implementation</strong> needs proper error handling and token rotation</li>
</ul>
<h3 class="heading" id="3-react-frontend-development">
  3. React Frontend Development
  <a class="anchor" href="#3-react-frontend-development">#</a>
</h3>
<ul>
<li><strong>React</strong> provides a component-based architecture for building UIs</li>
<li><strong>TypeScript</strong> catches many errors at compile time</li>
</ul>
<h3 class="heading" id="4-full-stack-integration">
  4. Full-Stack Integration
  <a class="anchor" href="#4-full-stack-integration">#</a>
</h3>
<ul>
<li><strong>API design</strong> should be consistent across all clients</li>
<li><strong>Error handling</strong> needs to be comprehensive at all layers</li>
<li><strong>Authentication flow</strong> must work seamlessly across web and extension</li>
</ul>
<h3 class="heading" id="5-end-to-end-deployment">
  5. End to end deployment
  <a class="anchor" href="#5-end-to-end-deployment">#</a>
</h3>
<ul>
<li><strong>Docker</strong> simplifies deployment but requires careful image management</li>
<li><strong>Railway for backend</strong> provides a great platform for Go applications with easy scaling</li>
<li><strong>Railway for database</strong> simplifies PostgreSQL management</li>
<li><strong>Vercel</strong> simplifies React deployments with automatic optimizations</li>
</ul>
<h2 class="heading" id="conclusion">
  Conclusion
  <a class="anchor" href="#conclusion">#</a>
</h2>
<p>Building the TTS Study Assistant was an to learn full-stack development, covering everything from browser extension APIs, admin panel, Golang based backend development to AI integration. The project demonstrates modern development practices while solving real user problems.</p>
<p>The project is open-source and available on GitHub, serving as both a functional study tool and a reference implementation for similar applications.</p>
<h2 class="heading" id="links">
  Links:
  <a class="anchor" href="#links">#</a>
</h2>
<ul>
<li><a href="git@github.com:pratts/tts-study-assistant.git">GitHub Repository</a></li>
<li><a href="www.tidylnk.com/1RucaU">Chrome Web Store Listing</a></li>
<li><a href="https://tts-study-assistant.vercel.app/">Admin Panel</a></li>
</ul>
<h2 class="heading" id="feedback">
  Feedback
  <a class="anchor" href="#feedback">#</a>
</h2>
<p>I welcome any feedback or contributions to the project. Feel free to open issues or pull requests on the GitHub repository. Your input can help improve the tool and add new features that benefit all users.</p>

    </div>
  </article>

  

  

  
  

  

  

  
  <div class="back-to-top">
    <a href="#top">
      back to top
    </a>
  </div>
  

</div>


    </main>
  </div>

  
  





    




  <footer>
    

    
    





    




    
    <p>Powered by
        <a href="https://gohugo.io/">Hugo</a>
        and
        <a href="https://github.com/tomfran/typo">tomfran/typo</a>
    </p>
    
    
    


  </footer>

  
</body>

<script src="/js/theme-switch.js"></script>
<script defer src="/js/copy-code.js"></script>
</html>
